{"version":3,"file":"arbox.js","sourceRoot":"","sources":["../../src/routes/arbox.ts"],"names":[],"mappings":";;AAAA,mCAAmC;AAEnC,4DAAoG;AAIpG,MAAM,WAAW,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;AACrC,MAAM,cAAc,GAAG,IAAI,8BAAa,EAAE,CAAC;AAC3C,MAAM,kBAAkB,GAAG,IAAI,qCAAoB,EAAE,CAAC;AAEtD,MAAM,MAAM,GAAG,CAAC,iBAAuC,EAAE,EAAE;IACvD,WAAW,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;QAC5C,MAAM,EAAC,IAAI,EAAC,GAAG,GAAG,CAAC,IAAW,CAAC;QAC/B,MAAM,EAAC,WAAW,EAAE,KAAK,EAAC,GAAG,GAAG,CAAC,OAAc,CAAC;QAEhD,iBAAiB,CAAC,OAAO,CAAC,IAAI,qBAAI,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC,CAAC;QAC9E,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACnB,CAAC,CAAC,CAAC;IAEH,WAAW,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;QACvC,MAAM,EAAC,QAAQ,EAAC,GAAG,GAAG,CAAC,IAAI,CAAC;QAE5B,iBAAiB,CAAC,eAAe,CAAC,iBAAiB,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE,QAAQ,CAAC,CAAA;QAE/F;;;;;;;;YAQI;QACJ,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAEjB,CAAC,CAAC,CAAC;IACH,WAAW,CAAC,MAAM,CAAC,uBAAuB,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;QAErD;;;;;;;;YAQI;QACJ,MAAM,EAAC,UAAU,EAAC,GAAG,GAAG,CAAC,MAAM,CAAC;QAEhC,iBAAiB,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,MAAM,EAAE,CAAC,UAAU,CAAC,CAAC;QAC7G,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAEjB,CAAC,CAAC,CAAC;IAEH,WAAW,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;QAC9B,GAAG,CAAC,IAAI,CAAC,EAAC,IAAI,EAAE,CAAC,EAAC,CAAC,CAAC;QACpB,iBAAiB,CAAC;IACtB,CAAC,CAAC,CAAC;IACH,OAAO,WAAW,CAAC;AACvB,CAAC,CAAC;AACF,kBAAe,MAAM,CAAC","sourcesContent":["import * as express from 'express';\r\nimport {IUserMap} from \"../interface/login.interface\";\r\nimport {ArboxSchedule, ArboxScheduleService, fakeScheduleItem, User} from \"../utils/arbox-schedule\";\r\nimport {format} from \"date-fns\";\r\nimport {IScheduleItem} from \"../interface/schedule\";\r\n\r\nconst arboxRouter = express.Router();\r\nconst _arboxSchedule = new ArboxSchedule();\r\nconst _arboxUserSchedule = new ArboxScheduleService();\r\n\r\nconst router = (arboxUserSchedule: ArboxScheduleService) => {\r\n    arboxRouter.post('/register-user', (req, res) => {\r\n        const {user} = req.body as any;\r\n        const {accesstoken: token} = req.headers as any;\r\n\r\n        arboxUserSchedule.setUser(new User(user.userFk, user.membrshipUserFk, token));\r\n        res.json(true);\r\n    });\r\n\r\n    arboxRouter.post('/schedule', (req, res) => {\r\n        const {schedule} = req.body;\r\n\r\n        arboxUserSchedule.setUserSchedule(arboxUserSchedule.getUser(req.headers.accesstoken), schedule)\r\n\r\n        /**\r\n        const fake: IScheduleItem | any = fakeScheduleItem;\r\n        fake.schedule.date = format(new Date(), 'yyyy-MM-dd');\r\n        fake.schedule.time = format(new Date(), 'HH:mm:ss');\r\n        fake.schedule.enableRegistrationTime = 0;\r\n        arboxSchedule.startSchedule(fake);\r\n         setTimeout(() => {arboxSchedule.removeSchedule(fake)}, 40000);\r\n\r\n         **/\r\n        res.json([]);\r\n\r\n    });\r\n    arboxRouter.delete('/schedule/:scheduleID', (req, res) => {\r\n\r\n        /**\r\n        const fake: IScheduleItem | any = fakeScheduleItem;\r\n        fake.schedule.date = format(new Date(), 'yyyy-MM-dd');\r\n        fake.schedule.time = format(new Date(), 'HH:mm:ss');\r\n        fake.schedule.enableRegistrationTime = 0;\r\n        arboxSchedule.startSchedule(fake);\r\n         setTimeout(() => {arboxSchedule.removeSchedule(fake)}, 40000);\r\n\r\n         **/\r\n        const {scheduleID} = req.params;\r\n\r\n        arboxUserSchedule.removeUserSchedule(arboxUserSchedule.getUser(req.headers.accesstoken).userFk, +scheduleID);\r\n        res.json([]);\r\n\r\n    });\r\n\r\n    arboxRouter.get('/', (req, res) => {\r\n        res.json({helo: 1});\r\n        arboxUserSchedule;\r\n    });\r\n    return arboxRouter;\r\n};\r\nexport default router;"]}